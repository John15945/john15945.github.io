(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e7c38da"],{"0e8f":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return s}));a("99af");var n=a("b775"),r="",o=function(){return Object(n["c"])("".concat(r,"/api-user/department/findAll"))},i=function(e){return Object(n["b"])("".concat(r,"/api-user/department/").concat(e))};function l(e){return Object(n["a"])({url:"".concat(r,"/api-user/department/saveOrUpdate"),method:"post",isJson:!0,data:JSON.stringify(e)})}var s=function(e){return Object(n["c"])("".concat(r,"/api-user/department/editName"),e)}},"13c4":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l}));var n=a("b775"),r="";function o(e){return Object(n["a"])({url:"".concat(r,"/api-project/project/findProjects"),method:"get",params:e})}function i(e){return Object(n["a"])({url:"".concat(r,"/api-project/project/saveOrUpdate"),method:"post",isJson:!0,data:JSON.stringify(e)})}function l(e){return Object(n["a"])({url:"".concat(r,"/api-project/project/saveOrUpdate"),method:"post",isJson:!0,data:JSON.stringify(e)})}},"1dbc":function(e,t,a){"use strict";a("b448")},2061:function(e,t,a){},3183:function(e,t,a){},"5a8e":function(e,t,a){},"5e66":function(e,t,a){"use strict";a("5a8e")},"69ab":function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return i})),a.d(t,"i",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"m",(function(){return h})),a.d(t,"e",(function(){return g}));var n=a("b775"),r="";function o(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/publicDataCatDatasource"),method:"get",params:e})}function i(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/publicDataCatDatabase"),method:"get",params:e})}function l(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/publicDataCatTable"),method:"get",params:e})}function s(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/tableManage/findTableDetail"),method:"get",params:e})}function c(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/tableManage/findDataTypes"),method:"get",params:e})}function d(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/synchDatabase"),method:"get",params:e})}function u(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/synchTable"),method:"get",params:e})}function p(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/dropDatabase"),method:"get",params:e})}function m(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/dropTable"),method:"get",params:e})}function f(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/createDatabase"),method:"get",params:e})}function b(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/createTable"),method:"post",isJson:!0,data:JSON.stringify(e)})}function h(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/dataCatalog/modifyTable"),method:"post",isJson:!0,data:JSON.stringify(e)})}function g(e){return Object(n["a"])({url:"".concat(r,"/api-dataManage/privilegeManage/apply"),method:"post",isJson:!0,data:JSON.stringify(e)})}},"7bbf":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tree-select",{ref:"treeSelect",attrs:{loading:e.loading,clearable:e.clearable,"only-child":e.onlyChild,"tree-data":e.treeData},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"select",attrs:{value:e.currentValuet,loading:e.loading,clearable:e.clearable},on:{clear:e.clearData}},[a("el-option",{staticClass:"dropdown__tree",attrs:{value:0,label:e.currentLabel}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","highlight-current":"",accordion:"","default-expanded-keys":[e.pid]},on:{"node-click":e.handleNodeClick}})],1)],1)},i=[],l=(a("b0c0"),{components:{},name:"vTreeSelect",props:{value:{required:!0},loading:{type:Boolean},clearable:{type:Boolean},treeData:{required:!0,type:Array},onlyChild:{type:Boolean,default:!1}},data:function(){return{currentLabel:void 0,pid:void 0,defaultProps:{children:"subs",label:"name"}}},computed:{currentValuet:function(){if(this.pid="",null!==this.value&&void 0!==this.value){var e=this.currentNode(this.treeData,this.value);return this.pid=!0===e||void 0===e?"":e,0}this.pid=""}},methods:{currentNode:function(e,t){for(var a in e){if(e[a].id===t)return this.selectNode(e[a]),!0;if(e[a].subs&&e[a].subs.length>0){var n=this.currentNode(e[a].subs,t);if(void 0!==n)return!0===n?e[a].id:n}}},handleNodeClick:function(e){return(!this.onlyChild||(!e.subs||0===e.subs.length))&&this.$emit("input",parseInt(e.id))},selectNode:function(e){var t=this;this.$nextTick((function(){t.$refs["tree"].setCurrentKey(e.id)})),this.$refs["select"]&&(this.$refs["select"].visible=!1),this.currentLabel=e.name},clearData:function(){this.$emit("input",void 0)}}}),s=l,c=(a("80ad"),a("2877")),d=Object(c["a"])(s,o,i,!1,null,null,null),u=d.exports,p=a("0e8f"),m={name:"OrgTree",components:{vTreeSelect:u},props:{value:{required:!0},corpId:{required:!1},clearable:{type:Boolean},onlyChild:{type:Boolean}},computed:{currentValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},data:function(){return{loading:!1,treeData:[]}},methods:{refresh:function(){var e=this;this.loading=!0,Object(p["c"])().then((function(t){e.loading=!1,e.treeData=[{subs:t,id:0,name:"部门"}]}))},fnClear:function(){this.$refs["treeSelect"].clearData()}},created:function(){this.refresh()},mounted:function(){var e=this;this.$refs["treeSelect"].$on("nodeClick",(function(t){e.$emit("nodeClick",t)}))}},f=m,b=Object(c["a"])(f,n,r,!1,null,null,null);t["a"]=b.exports},"80ad":function(e,t,a){"use strict";a("3183")},"83db":function(e,t,a){"use strict";a("2061")},adc6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"公共数据",name:"first"}},[a("common-data")],1),a("el-tab-pane",{attrs:{label:"项目数据",name:"second"}},[a("product-data")],1),a("el-tab-pane",{attrs:{label:"个人数据",name:"third"}},[a("person-data")],1)],1)],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("p",{staticClass:"header-title"},[e._v("库表信息")]),e.isShowTree?a("el-tree",{ref:"tree",staticStyle:{"min-height":"300px"},attrs:{"node-key":"id",props:e.props,load:e.loadNode,lazy:"",accordion:"","highlight-current":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.data.name||n.data.dbName||n.data.tableName))]),a("span",[r&&!r.isFirst?a("el-button",{attrs:{size:"large",type:"text",icon:"el-icon-refresh"},on:{click:function(t){return t.stopPropagation(),e.update(r,n)}}}):e._e(),r&&!r.isThird?a("el-button",{attrs:{size:"large",type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.appendDbOrTable(r,n)}}}):e._e(),r&&!r.isFirst?a("el-button",{staticStyle:{color:"red"},attrs:{size:"large",type:"text",icon:"el-icon-remove-outline"},on:{click:function(t){return t.stopPropagation(),e.fnRemove(n,r)}}}):e._e()],1)])}}],null,!1,841773864)}):e._e()],1),a("el-col",{attrs:{span:13,offset:1}},[a("div",{staticClass:"oprate-form_btn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.updateTableData}},[e._v("修改表")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.dataPermissionApply}},[e._v("数据权限申请")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.goToDataManagemnt}},[e._v("数据权限管理")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.createSql}},[e._v("建表语句")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-container mt-20",staticStyle:{width:"100%"},attrs:{fit:"",border:"","header-cell-style":e.tableHeaderColor,data:e.tableList}},[a("el-table-column",{attrs:{prop:"columnName",label:"字段名","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"dataType",label:"数据类型","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"columnComment",label:"注释","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"预览数据","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.curPreviewData&&e.curPreviewData[t.row.columnName])+" ")]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:"创建库",visible:e.createDbModal,width:"30%",center:"","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.createDbModal=t}}},[a("el-form",{ref:"createDbForm",attrs:{size:"small",model:e.createDbForm,rules:e.createDbFormRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"库名",prop:"name"}},[a("el-input",{attrs:{placeholder:"库名",maxlength:20},model:{value:e.createDbForm.name,callback:function(t){e.$set(e.createDbForm,"name",t)},expression:"createDbForm.name"}})],1),a("el-form-item",{attrs:{label:"申请理由",prop:"reason"}},[a("el-input",{attrs:{placeholder:"申请理由",maxlength:30},model:{value:e.createDbForm.reason,callback:function(t){e.$set(e.createDbForm,"reason",t)},expression:"createDbForm.reason"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancelClick}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmClick}},[e._v("确认")])],1)],1),a("el-dialog",{key:e.dialogId,attrs:{title:e.modalOption.title,visible:e.modalOption.show,width:"50%",center:"","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.modalOption,"show",t)}}},[a("el-form",{ref:"plantRadiationForm",attrs:{size:"small",model:e.dataForm,rules:e.dataFormRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"建表形式",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.typeList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),"sql建表"===e.dataForm.type?[a("el-form-item",{attrs:{label:"sql语句",prop:"sqlStatement"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.dataForm.sqlStatement,callback:function(t){e.$set(e.dataForm,"sqlStatement",t)},expression:"dataForm.sqlStatement"}})],1),a("el-form-item",{attrs:{label:"预览数据",prop:"previewData"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.dataForm.previewData,callback:function(t){e.$set(e.dataForm,"previewData",t)},expression:"dataForm.previewData"}})],1),a("el-form-item",{attrs:{label:"申请理由",prop:"reason"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.dataForm.reason,callback:function(t){e.$set(e.dataForm,"reason",t)},expression:"dataForm.reason"}})],1)]:e._e(),"可视化建表"===e.dataForm.type?[a("el-form-item",{attrs:{label:"表名",prop:"name"}},[a("el-input",{attrs:{maxlength:20},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.dataForm.description,callback:function(t){e.$set(e.dataForm,"description",t)},expression:"dataForm.description"}})],1),a("el-form-item",{attrs:{label:"申请理由",prop:"reason"}},[a("el-input",{attrs:{maxlength:200},model:{value:e.dataForm.reason,callback:function(t){e.$set(e.dataForm,"reason",t)},expression:"dataForm.reason"}})],1),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addColumn}},[e._v("添加字段")]),a("el-table",{ref:"dragTable",staticClass:"table-container mt-20",staticStyle:{width:"100%"},attrs:{"row-key":"id","header-cell-style":e.tableHeaderColor,size:"medium",border:"",data:e.columnList}},[a("el-table-column",{attrs:{prop:"columnName",label:"字段名","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"dataType",label:"数据类型","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"args",label:"参数","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"可空","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.isNotNull?"可为空":"不可为空"))])]}}],null,!1,931198444)}),a("el-table-column",{attrs:{prop:"defVal",label:"默认值","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"分区字段","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.isPartition?"分区字段":"不是分区字段"))])]}}],null,!1,356854703)}),a("el-table-column",{attrs:{label:"主键","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.isPrimkey?"主键":"非主键"))])]}}],null,!1,2886697632)}),a("el-table-column",{attrs:{prop:"columnComment",label:"注释","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"previewData",label:"预览数据","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDrag?a("span",{staticClass:"edit-wrapper mr-10"},[a("i",{staticClass:"el-icon-rank"})]):e._e(),a("span",{staticClass:"edit-wrapper mr-10",on:{click:function(a){return a.stopPropagation(),e.modifyDomain(t.row)}}},[e._v("修改")]),t.row.isDrag?a("span",{staticClass:"edit-wrapper",on:{click:function(a){return a.stopPropagation(),e.removeDomain(t.row.id)}}},[e._v("删除")]):e._e()]}}],null,!1,2691599911)})],1)]:e._e()],2),a("div",{staticClass:"dialog_footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.cancelClick(t)}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.confirmClick(t)}}},[e._v("确定")])],1)],1),a("el-dialog",{ref:"partnerDiag",attrs:{visible:e.partnerVisible,title:e.partnerTitle,width:"600px",center:"","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.partnerVisible=t}}},[a("column-form",{ref:"columnForm"}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return t.stopPropagation(),e.partnerDiagCancel(t)}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.savePartner(t)}}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:e.delModalOption.title,visible:e.delModalOption.show,width:"30%",center:"","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(e.delModalOption,"show",t)}}},[a("el-form",{ref:"delDataForm",attrs:{size:"small",model:e.delDataForm,rules:e.delDataFormRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"申请理由",prop:"reason"}},[a("el-input",{attrs:{maxlength:30},model:{value:e.delDataForm.reason,callback:function(t){e.$set(e.delDataForm,"reason",t)},expression:"delDataForm.reason"}})],1)],1),a("div",{staticClass:"dialog_footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.fnCancelClick(t)}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.fnConfirmClick(t)}}},[e._v("确定")])],1)],1),a("el-dialog",{ref:"dataPermissionDialog",attrs:{visible:e.dataPermissionVisible,title:"数据权限申请",width:"560px",center:"","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dataPermissionVisible=t}}},[a("data-permission-form",{ref:"dataPermission"}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return t.stopPropagation(),e.dataPermissionDialogCancel(t)}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.saveDataPermission(t)}}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"建表语句",visible:e.sqlVisable,width:"30%",center:"","destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.sqlVisable=t}}},[a("div",[e._v(" "+e._s(e.tableSqlStatement)+" ")]),a("div",{staticClass:"dialog_footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){t.stopPropagation(),e.sqlVisable=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){t.stopPropagation(),e.sqlVisable=!1}}},[e._v("确定")])],1)])],1)},i=[],l=a("5530"),s=(a("d81d"),a("d3b7"),a("b0c0"),a("a4d3"),a("e01a"),a("b64b"),a("c740"),a("a434"),a("85b3")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"partnerForm",staticStyle:{margin:"10px 20px 0 20px"},attrs:{size:"small",model:e.dataForm,rules:e.dataFormRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"字段名",prop:"columnName"}},[a("el-input",{attrs:{maxlength:20,disabled:e.isDisable},model:{value:e.dataForm.columnName,callback:function(t){e.$set(e.dataForm,"columnName",t)},expression:"dataForm.columnName"}})],1),a("el-form-item",{attrs:{label:"数据类型",prop:"dataType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisable},model:{value:e.dataForm.dataType,callback:function(t){e.$set(e.dataForm,"dataType",t)},expression:"dataForm.dataType"}},e._l(e.typeList,(function(t,n){return a("el-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"参数",prop:"args"}},[a("el-input",{attrs:{maxlength:20,disabled:e.isDisable},model:{value:e.dataForm.args,callback:function(t){e.$set(e.dataForm,"args",t)},expression:"dataForm.args"}})],1),a("el-form-item",{attrs:{label:"是否可空",prop:"isNotNull"}},[a("el-radio-group",{attrs:{disabled:e.isDisable},model:{value:e.dataForm.isNotNull,callback:function(t){e.$set(e.dataForm,"isNotNull",t)},expression:"dataForm.isNotNull"}},[a("el-radio",{attrs:{label:!0}},[e._v("可为空")]),a("el-radio",{attrs:{label:!1}},[e._v("不为空")])],1)],1),a("el-form-item",{attrs:{label:"默认值",prop:"defVal"}},[a("el-input",{attrs:{maxlength:20},model:{value:e.dataForm.defVal,callback:function(t){e.$set(e.dataForm,"defVal",t)},expression:"dataForm.defVal"}})],1),a("el-form-item",{attrs:{label:"分区字段",prop:"isPartition"}},[a("el-radio-group",{attrs:{disabled:e.isDisable},model:{value:e.dataForm.isPartition,callback:function(t){e.$set(e.dataForm,"isPartition",t)},expression:"dataForm.isPartition"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"主键",prop:"isPrimkey"}},[a("el-radio-group",{attrs:{disabled:e.isDisable},model:{value:e.dataForm.isPrimkey,callback:function(t){e.$set(e.dataForm,"isPrimkey",t)},expression:"dataForm.isPrimkey"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"注释",prop:"columnComment"}},[a("el-input",{attrs:{maxlength:50},model:{value:e.dataForm.columnComment,callback:function(t){e.$set(e.dataForm,"columnComment",t)},expression:"dataForm.columnComment"}})],1),a("el-form-item",{attrs:{label:"预览数据",prop:"previewData"}},[a("el-input",{attrs:{maxlength:50},model:{value:e.dataForm.previewData,callback:function(t){e.$set(e.dataForm,"previewData",t)},expression:"dataForm.previewData"}})],1)],1)},d=[],u=a("69ab"),p={name:"partnerForm",data:function(){return{typeList:[],isDisable:!1,isEditStatus:!1,dataForm:{columnName:"",dataType:"",args:"",isNotNull:"",defVal:"",isPartition:"",isPrimkey:"",columnComment:"",previewData:""},dataFormRules:{columnName:[{required:!0,message:"请输入字段名",trigger:"blur"}],dataType:[{required:!0,message:"请选择数据类型",trigger:"blur"}],args:[{required:!0,message:"请输入参数",trigger:"blur"}],isNotNull:[{required:!0,message:"请选择",trigger:"blur"}],isPartition:[{required:!0,message:"请选择",trigger:"blur"}],isPrimkey:[{required:!0,message:"请选择",trigger:"blur"}]}}},methods:{getTypeList:function(e){var t=this;Object(u["f"])({databaseId:e}).then((function(e){t.typeList=e&&e.length>0?e:[]})).catch((function(){}))},fnModify:function(e){this.dataForm=Object.assign({},e),this.isDisable=!e.isDrag,this.isEditStatus=!0},getPartner:function(){var e=this;this.isEditStatus||(this.dataForm.id=(new Date).getTime());var t=Object.assign({},this.dataForm);return new Promise((function(a,n){e.$refs["partnerForm"].validate((function(e){e?a(t):n()}))}))},resetForm:function(){this.$refs["partnerForm"].resetFields()}}},m=p,f=a("2877"),b=Object(f["a"])(m,c,d,!1,null,"f1cd78d8",null),h=b.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"dataPermissionForm",staticStyle:{margin:"10px 20px 0px 0px"},attrs:{size:"small",model:e.dataForm,rules:e.dataFormRules,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"申请理由",prop:"reason"}},[a("el-input",{attrs:{maxlength:50,disabled:e.isDisable},model:{value:e.dataForm.reason,callback:function(t){e.$set(e.dataForm,"reason",t)},expression:"dataForm.reason"}})],1),a("el-form-item",{attrs:{label:"权限类型",prop:"type"}},[a("el-checkbox-group",{model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.permissionList,(function(t,n){return a("el-checkbox",{key:n,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1)},v=[],y={name:"dataPermissionForm",data:function(){return{isDisable:!1,permissionList:["SELECT","INSERT","UPDATE","DELETE"],dataForm:{reason:"",type:[]},dataFormRules:{reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}],type:[{required:!0,message:"请选择权限类型",trigger:"blur"}]}}},methods:{getPartner:function(){var e=this,t=Object.assign({},this.dataForm);return new Promise((function(a,n){e.$refs["dataPermissionForm"].validate((function(e){e?a(t):n()}))}))},resetForm:function(){this.$refs["dataPermissionForm"].resetFields()}}},D=y,w=Object(f["a"])(D,g,v,!1,null,"167f89b8",null),F=w.exports,C={name:"CommonData",components:{columnForm:h,dataPermissionForm:F},data:function(){return{dataPermissionVisible:!1,currentId:0,isShowTree:!1,props:{label:"name",children:"zones",isLeaf:"leaf"},categorylist:[],delModalOption:{show:!1,title:"删除库"},delDataForm:{reason:""},delDataFormRules:{reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}]},currentDbId:0,createDbModal:!1,createDbForm:{name:"",reason:""},createDbFormRules:{name:[{required:!0,message:"请输入库名",trigger:"blur"}],reason:[{required:!0,message:"请输入申请理由",trigger:"blur"}]},tableLoading:!1,curPreviewData:{},tableList:[],dialogId:1,createTableId:0,updateTableId:0,typeList:[{id:1,name:"sql建表"},{id:2,name:"可视化建表"}],modalOption:{show:!1,title:"创建项目"},dataForm:{name:"",description:"",reason:"",type:"",sqlStatement:"",previewData:""},dataFormRules:{name:[{required:!0,message:"请输入项目名",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],type:[{required:!0,message:"请选择建表形式",trigger:"blur"}],sqlStatement:[{required:!0,message:"请输入sql语句",trigger:"blur"}]},columnList:[],partnerVisible:!1,partnerTitle:"新增字段",partnerData:[],currentTableData:{},sqlVisable:!1,tableSqlStatement:""}},created:function(){this.getCategorylist()},methods:{loadNode:function(e,t){if(0===e.level)return t(this.categorylist);if(1===e.level)this.getSecondNode(e,t);else if(2===e.level)this.getThirdNode(e,t);else if(e.level>2)return t([])},getCategorylist:function(){var e=this;Object(u["g"])().then((function(t){t&&t.length&&t.length>0?(e.categorylist=t.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{isFirst:!0})})),e.isShowTree=!0):(e.isShowTree=!1,resolve([]))})).catch((function(){}))},getSecondNode:function(e,t){var a=e.data.id;Object(u["h"])({datasourceId:a}).then((function(e){if(e&&Array.isArray(e)&&e.length>0){var a=e.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{isSecond:!0,leaf:!1})}));t(a)}else t([])})).catch((function(){}))},getThirdNode:function(e,t){var a=e.data.id;Object(u["i"])({databaseId:a}).then((function(e){if(e&&Array.isArray(e)&&e.length>0){var a=e.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{isThird:!0,leaf:!0})}));t(a)}else t([])})).catch((function(){}))},handleNodeClick:function(e){e&&e.tableName&&e.id&&this.getDetail(e.id)},appendDbOrTable:function(e,t){var a=t.level,n=t.data.id;1===a?(this.currentDbId=n,this.createDbForm={name:"",reason:""},this.createDbModal=!0):2===a&&(this.createTableId=n,this.createTable())},handleCancelClick:function(){this.$refs["createDbForm"].resetFields(),this.createDbModal=!1},handleConfirmClick:function(){var e=this;this.$refs["createDbForm"].validate((function(t){t&&Object(u["a"])({datasourceId:e.currentDbId,dbName:e.createDbForm.name,reason:e.createDbForm.reason}).then((function(t){0===t.resp_code?(e.$message({type:"success",message:"创建成功!"}),e.handleCancelClick(),e.isShowTree=!1):e.$message({type:"error",message:t.resp_msg})})).catch((function(){})).finally((function(){e.isShowTree=!0}))}))},update:function(e,t){var a=this,n=t.data.id,r=t.level;2===r?Object(u["k"])({databaseId:n}).then((function(e){var t=0===e.resp_code?"success":"error";a.$message({type:t,message:e.resp_msg}),a.isShowTree=!1})).catch((function(){})).finally((function(){a.isShowTree=!0})):3===r&&Object(u["l"])({tableId:n}).then((function(e){var t=0===e.resp_code?"success":"error";a.$message({type:t,message:e.resp_msg}),a.isShowTree=!1})).catch((function(){})).finally((function(){a.isShowTree=!0}))},fnRemove:function(e,t){var a=e.level;this.currentId=e.data.id,this.delModalOption.title=2===a?"删除库":"删除表",this.delModalOption.show=!0},fnCancelClick:function(){this.$refs["delDataForm"].resetFields(),this.delModalOption.show=!1},fnConfirmClick:function(){var e=this;this.$refs["delDataForm"].validate((function(t){t&&("删除库"===e.modalOption.title?Object(u["c"])({databaseId:e.currentId,reason:e.delDataForm.reason}).then((function(t){var a=0===t.resp_code?"success":"error";e.$message({type:a,message:t.resp_msg}),e.isShowTree=!1,e.fnCancelClick()})).catch((function(){})).finally((function(){e.isShowTree=!0})):Object(u["d"])({tableId:e.currentId,reason:e.delDataForm.reason}).then((function(t){var a=0===t.resp_code?"success":"error";e.$message({type:a,message:t.resp_msg}),e.isShowTree=!1,e.fnCancelClick()})).catch((function(){})).finally((function(){e.isShowTree=!0})))}))},getDetail:function(e){var t=this;this.tableLoading=!0,Object(u["j"])({tableId:e}).then((function(e){t.currentTableData=e,e&&e.columns&&e.columns.length>0?(t.tableList=null===e||void 0===e?void 0:e.columns,t.curPreviewData=JSON.parse(e.previewData)):t.tableList=[]})).catch((function(){})).finally((function(){t.tableLoading=!1}))},createTable:function(){this.dialogId++,this.dataForm={type:"",name:"",description:"",sqlStatement:"",reason:"",previewData:""},this.modalOption.title="创建表",this.modalOption.show=!0},createMethod:function(e){var t=this,a=null;"sql建表"===e.type?a={databaseId:this.createTableId,type:"sql",ddl:e.sqlStatement,previewData:e.previewData,reason:e.reason}:"可视化建表"===e.type&&(a={databaseId:this.createTableId,type:"visual",tableInfo:{columns:this.columnList,indexs:[],tableComment:e.description,tableName:e.name},previewData:"",reason:e.reason}),Object(u["b"])(a).then((function(e){t.$message({type:"success",message:"创建成功!"}),t.cancelClick(),t.isShowTree=!1})).catch((function(){})).finally((function(){t.isShowTree=!0}))},updateTableData:function(){var e=Object.assign({},this.currentTableData);if(0!==Object.keys(e).length){this.createTableId=null===e||void 0===e?void 0:e.databaseId,this.updateTableId=null===e||void 0===e?void 0:e.id,this.dialogId++,this.dataForm=Object(l["a"])(Object(l["a"])({},e),{},{id:e.id,type:"sql建表",sqlStatement:"",previewData:e.previewData,name:e.tableName,description:e.tableComment,reason:(null===e||void 0===e?void 0:e.reason)||""});var t=(null===e||void 0===e?void 0:e.columns)||[];this.columnList=t.map((function(e,t){return Object(l["a"])({id:t+1,isDrag:!1},e)})),this.modalOption.title="修改表",this.modalOption.show=!0}else this.$message({type:"info",message:"请选择需要修改的表!"})},updateMethod:function(e){var t=this,a=null;"sql建表"===e.type?a={tableId:this.updateTableId,type:"sql",ddl:e.sqlStatement,previewData:e.previewData,reason:e.reason}:"可视化建表"===e.type&&(a={tableId:this.updateTableId,type:"visual",tableInfo:{columns:this.columnList,indexs:[],tableComment:e.description,tableName:e.name},previewData:"",reason:e.reason}),Object(u["m"])(a).then((function(e){0===e.resp_code?(t.$message({type:"success",message:e.resp_msg}),t.cancelClick(),t.isShowTree=!1):t.$message({type:"error",message:e.resp_msg})})).catch((function(){})).finally((function(){t.isShowTree=!0}))},cancelClick:function(){this.$refs["plantRadiationForm"].resetFields(),this.modalOption.show=!1},confirmClick:function(){var e=this;this.$refs["plantRadiationForm"].validate((function(t){if(t){var a=Object.assign({},e.dataForm);"创建表"===e.modalOption.title?e.createMethod(a):e.updateMethod(a)}}))},addColumn:function(){var e=this;this.partnerVisible=!0,this.partnerTitle="新增字段";var t=this.createTableId;this.$nextTick((function(){e.$refs.columnForm.getTypeList(t)}))},modifyDomain:function(e){var t=this;this.partnerVisible=!0,this.partnerTitle="修改字段";var a=this.createTableId;this.$nextTick((function(){t.$refs.columnForm.getTypeList(a),t.$refs.columnForm.fnModify(e)}))},removeDomain:function(e){var t=this.columnList.findIndex((function(t){return t.id===e}));-1!==t&&this.columnList.splice(t,1)},partnerDiagCancel:function(){this.$refs.partnerDiag.hide(),this.$refs.columnForm.resetForm()},savePartner:function(){var e=this;this.$refs.columnForm.getPartner().then((function(t){if("新增字段"===e.partnerTitle){var a=Object(l["a"])({isDrag:!0},t);e.columnList.push(a)}else{var n=e.columnList.findIndex((function(e){return e.id===t.id}));-1!==n&&e.columnList.splice(n,1,t)}e.partnerDiagCancel(),e.$nextTick((function(){e.setSort()}))})).catch((function(){}))},setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=s["a"].create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(t){var a=e.columnList.splice(t.oldIndex,1)[0];e.columnList.splice(t.newIndex,0,a)}})},dataPermissionApply:function(){this.dataPermissionVisible=!0},dataPermissionDialogCancel:function(){this.$refs.dataPermissionDialog.hide(),this.$refs.dataPermission.resetForm()},saveDataPermission:function(){var e=this;this.$refs.dataPermission.getPartner().then((function(t){Object(u["e"])({tableId:9230,reason:null===t||void 0===t?void 0:t.reason,privileges:null===t||void 0===t?void 0:t.type}).then((function(t){var a=0===t.resp_code?"success":"error";e.$message({type:a,message:t.resp_msg}),e.dataPermissionDialogCancel()}))})).catch((function(){}))},goToDataManagemnt:function(){var e=Object.assign({},this.currentTableData);0!==Object.keys(e).length?this.$router.push({path:"/data-management/data-permission-management",query:{datasourceId:e.datasourceId,databaseId:e.databaseId,dbName:e.dbName,tableId:e.id,tableName:e.tableName}}):this.$message({type:"info",message:"请选择需要对应的表!"})},createSql:function(){var e=Object.assign({},this.currentTableData);0!==Object.keys(e).length?(this.sqlVisable=!0,this.tableSqlStatement=e.ddl):this.$message({type:"info",message:"请选择需要对应的表!"})}}},k=C,O=(a("5e66"),Object(f["a"])(k,o,i,!1,null,"cab34364",null)),T=O.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("p",{staticClass:"header-title"},[e._v("库表信息")]),e.isShowTree?a("el-tree",{ref:"tree",staticStyle:{"min-height":"300px"},attrs:{"node-key":"id",load:e.loadNode,lazy:"",accordion:"","highlight-current":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.data.name||n.data.tableName))]),r&&0!==r.id?a("span",[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.appendDepartment(r)}}}),a("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(t){return t.stopPropagation(),e.update(r,n)}}}),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),e.removeDepartment(n,r)}}})],1):a("span",[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.appendDepartment(r,1)}}})],1)])}}],null,!1,3266562225)}):e._e()],1),a("el-col",{attrs:{span:14}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-container mt-20",staticStyle:{width:"100%"},attrs:{fit:"",border:"","header-cell-style":e.tableHeaderColor,data:e.tableList}},[a("el-table-column",{attrs:{prop:"name",label:"字段名","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"description",label:"数据类型","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"department",label:"注释","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"edit-wrapper",on:{click:function(a){return a.stopPropagation(),e.updateTableData(t.row)}}},[e._v("修改表")])]}}])})],1),a("el-pagination",{staticClass:"g-zv-pagination",attrs:{"current-page":e.pages.pageNum,"page-size":e.pages.pageSize,"page-sizes":[5,10,15,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.pages.total},on:{"update:currentPage":function(t){return e.$set(e.pages,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pages,"pageNum",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},S=[],x=a("13c4"),j=(a("99af"),a("b775")),N="";function $(e){return Object(j["a"])({url:"".concat(N,"/api-dataManage/dataCatalog/publicDataCatDatasource"),method:"get",params:e})}function P(e){return Object(j["a"])({url:"".concat(N,"/api-dataManage/dataCatalog/publicDataCatTable"),method:"get",params:e})}var I=a("0e8f"),L={name:"ProductData",data:function(){return{isShowTree:!1,props:{label:"name",children:"zones",isLeaf:"leaf"},categorylist:[],modalTreeOption:{title:"",show:!1},editTreeForm:{name:"",parentId:""},editTreeFormRules:{name:[{required:!0,message:"请输入部门",trigger:"blur"}]},parentOrgName:"",currentValue:null,pages:{pageNum:1,pageSize:10},tableLoading:!1,tableList:[{name:"深圳市前海大厦XXX项目",description:"这是一个描述，这是一个描述，这...",adminName:"李四",department:"IT运维部",projectMembers:"李四",createTime:"2021-07-05",hive:"配置项目hive库"}],dialogId:1,modalOption:{show:!1,title:"创建项目"},dataForm:{name:"",description:"",departmentId:null},isDisable:!1,dataFormRules:{name:[{required:!0,message:"请输入项目名",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],departmentId:[{required:!0,message:"请选择部门",trigger:"blur"}]}}},mounted:function(){},methods:{loadNode:function(e,t){return 0===e.level?t(this.categorylist):e.level>1?t([]):void(1===e.level&&this.getChildrenNode(e,t))},getCategorylist:function(){var e=this;$().then((function(t){if(t&&Array.isArray(t)){var a=t.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{leaf:!0})}));e.categorylist=a,e.isShowTree=!0}else resolve([])})).catch((function(){}))},getChildrenNode:function(e,t){var a=e.data.id;P({databaseId:a}).then((function(e){if(e&&Array.isArray(e)){var a=e.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{leaf:!0})}));t(a)}else t([])})).catch((function(){}))},handleNodeClick:function(e){this.currentValue=e},appendDepartment:function(e){this.editTreeForm.name="",this.modalTreeOption.title="创建库",this.modalTreeOption.show=!0},update:function(e,t){this.editTreeForm={id:e.id,name:e.name,parentId:e.parentId},this.modalTreeOption.title="编辑部门名称",this.modalTreeOption.show=!0},removeDepartment:function(e,t){var a=this;this.$confirm("是否删除该部门？","Confirmation",{cancelButtonText:"取消",confirmButtonText:"确认",type:"warning"}).then((function(){Object(I["b"])(t.id).then((function(e){0===e.resp_code?(a.$message({type:"success",message:"删除成功!"}),a.init(),a.currentValue=null):a.$message({type:"error",message:e.resp_msg})})).catch((function(){}))}))},getDataList:function(){var e=this;this.tableLoading=!0;var t={page:this.pages.pageNum,limit:this.pages.pageSize};Object(x["b"])(t).then((function(t){e.pages.total=null===t||void 0===t?void 0:t.count,e.tableList=(null===t||void 0===t?void 0:t.data)||[]})).catch((function(){})).finally((function(){e.tableLoading=!1}))},handleCurrentChange:function(e){this.pages.pageNum=e,this.getDataList()},handleSizeChange:function(e){this.pages.pageSize=e,this.getDataList()},createProject:function(){this.dialogId++,this.dataForm={name:"",description:"",departmentId:0},this.modalOption.title="创建项目",this.modalOption.show=!0},createMethod:function(e){var t=this;Object(x["a"])(e).then((function(e){t.$message({type:"success",message:"新建成功!"}),t.cancelClick(),t.pages.pageNum=1,t.getDataList()})).catch((function(){}))},updateTableData:function(e){this.dialogId++,this.dataForm={id:e.id,name:e.name,description:e.description,departmentId:e.departmentId},this.modalOption.title="编辑项目",this.modalOption.show=!0},updateMethod:function(e){var t=this;Object(x["c"])(e).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.cancelClick(),t.pages.pageNum=1,t.getDataList()})).catch((function(){}))},confirmClick:function(){var e=this;this.$refs["plantRadiationForm"].validate((function(t){if(!t)return!1;var a=Object.assign({},e.dataForm);"创建项目"===e.modalOption.title?e.createMethod(a):(a.id=e.currentId,e.updateMethod(a))}))},cancelClick:function(){this.$refs["plantRadiationForm"].resetFields(),this.modalOption.show=!1},goTo:function(e){/^http/.test(e)?window.location.href=e:this.$router.push(e)}}},q=L,M=(a("1dbc"),Object(f["a"])(q,_,S,!1,null,"510d61fe",null)),z=M.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("p",{staticClass:"header-title"},[e._v("库表信息")]),e.isShowTree?a("el-tree",{ref:"tree",staticStyle:{"min-height":"300px"},attrs:{"node-key":"id",load:e.loadNode,lazy:"",accordion:"","highlight-current":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(n.data.name||n.data.tableName))]),r&&0!==r.id?a("span",[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.appendDepartment(r)}}}),a("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(t){return t.stopPropagation(),e.update(r,n)}}}),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return t.stopPropagation(),e.removeDepartment(n,r)}}})],1):a("span",[a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return t.stopPropagation(),e.appendDepartment(r,1)}}})],1)])}}],null,!1,3266562225)}):e._e()],1),a("el-col",{attrs:{span:14}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"table-container mt-20",staticStyle:{width:"100%"},attrs:{fit:"",border:"","header-cell-style":e.tableHeaderColor,data:e.tableList}},[a("el-table-column",{attrs:{prop:"name",label:"字段名","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"description",label:"数据类型","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"department",label:"注释","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"edit-wrapper",on:{click:function(a){return a.stopPropagation(),e.updateTableData(t.row)}}},[e._v("修改表")])]}}])})],1),a("el-pagination",{staticClass:"g-zv-pagination",attrs:{"current-page":e.pages.pageNum,"page-size":e.pages.pageSize,"page-sizes":[5,10,15,20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.pages.total},on:{"update:currentPage":function(t){return e.$set(e.pages,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pages,"pageNum",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},R=[],E=a("7bbf"),A="";function J(e){return Object(j["a"])({url:"".concat(A,"/api-dataManage/dataCatalog/publicDataCatDatasource"),method:"get",params:e})}function B(e){return Object(j["a"])({url:"".concat(A,"/api-dataManage/dataCatalog/publicDataCatTable"),method:"get",params:e})}var X={name:"PersonData",components:{OrgTree:E["a"]},data:function(){return{isShowTree:!1,props:{label:"name",children:"zones",isLeaf:"leaf"},categorylist:[],modalTreeOption:{title:"",show:!1},editTreeForm:{name:"",parentId:""},editTreeFormRules:{name:[{required:!0,message:"请输入部门",trigger:"blur"}]},parentOrgName:"",currentValue:null,pages:{pageNum:1,pageSize:10},tableLoading:!1,tableList:[{name:"深圳市前海大厦XXX项目",description:"这是一个描述，这是一个描述，这...",adminName:"李四",department:"IT运维部",projectMembers:"李四",createTime:"2021-07-05",hive:"配置项目hive库"}],dialogId:1,modalOption:{show:!1,title:"创建项目"},dataForm:{name:"",description:"",departmentId:null},isDisable:!1,dataFormRules:{name:[{required:!0,message:"请输入项目名",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],departmentId:[{required:!0,message:"请选择部门",trigger:"blur"}]}}},mounted:function(){},methods:{loadNode:function(e,t){return 0===e.level?t(this.categorylist):e.level>1?t([]):void(1===e.level&&this.getChildrenNode(e,t))},getCategorylist:function(){var e=this;J().then((function(t){if(t&&Array.isArray(t)){var a=t.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{leaf:!0})}));e.categorylist=a,e.isShowTree=!0}else resolve([])})).catch((function(){}))},getChildrenNode:function(e,t){var a=e.data.id;B({databaseId:a}).then((function(e){if(e&&Array.isArray(e)){var a=e.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{leaf:!0})}));t(a)}else t([])})).catch((function(){}))},handleNodeClick:function(e){this.currentValue=e},appendDepartment:function(e){this.editTreeForm.name="",this.modalTreeOption.title="创建库",this.modalTreeOption.show=!0},update:function(e,t){this.editTreeForm={id:e.id,name:e.name,parentId:e.parentId},this.modalTreeOption.title="编辑部门名称",this.modalTreeOption.show=!0},removeDepartment:function(e,t){var a=this;this.$confirm("是否删除该部门？","Confirmation",{cancelButtonText:"取消",confirmButtonText:"确认",type:"warning"}).then((function(){Object(I["b"])(t.id).then((function(e){0===e.resp_code?(a.$message({type:"success",message:"删除成功!"}),a.init(),a.currentValue=null):a.$message({type:"error",message:e.resp_msg})})).catch((function(){}))}))},getDataList:function(){var e=this;this.tableLoading=!0;var t={page:this.pages.pageNum,limit:this.pages.pageSize};Object(x["b"])(t).then((function(t){e.pages.total=null===t||void 0===t?void 0:t.count,e.tableList=(null===t||void 0===t?void 0:t.data)||[]})).catch((function(){})).finally((function(){e.tableLoading=!1}))},handleCurrentChange:function(e){this.pages.pageNum=e,this.getDataList()},handleSizeChange:function(e){this.pages.pageSize=e,this.getDataList()},createProject:function(){this.dialogId++,this.dataForm={name:"",description:"",departmentId:0},this.modalOption.title="创建项目",this.modalOption.show=!0},createMethod:function(e){var t=this;Object(x["a"])(e).then((function(e){t.$message({type:"success",message:"新建成功!"}),t.cancelClick(),t.pages.pageNum=1,t.getDataList()})).catch((function(){}))},updateTableData:function(e){this.dialogId++,this.dataForm={id:e.id,name:e.name,description:e.description,departmentId:e.departmentId},this.modalOption.title="编辑项目",this.modalOption.show=!0},updateMethod:function(e){var t=this;Object(x["c"])(e).then((function(e){t.$message({type:"success",message:"修改成功!"}),t.cancelClick(),t.pages.pageNum=1,t.getDataList()})).catch((function(){}))},confirmClick:function(){var e=this;this.$refs["plantRadiationForm"].validate((function(t){if(!t)return!1;var a=Object.assign({},e.dataForm);"创建项目"===e.modalOption.title?e.createMethod(a):(a.id=e.currentId,e.updateMethod(a))}))},cancelClick:function(){this.$refs["plantRadiationForm"].resetFields(),this.modalOption.show=!1}}},H=X,U=(a("83db"),Object(f["a"])(H,V,R,!1,null,"13b36e31",null)),K=U.exports,G={name:"DataCatalog",components:{CommonData:T,ProductData:z,PersonData:K},data:function(){return{activeName:"first"}},mounted:function(){},methods:{handleClick:function(e){}}},Q=G,W=Object(f["a"])(Q,n,r,!1,null,"42d6c630",null);t["default"]=W.exports},b448:function(e,t,a){}}]);